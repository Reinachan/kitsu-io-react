query getProfileBySlug(
		$id: ID!, 
		$slug: String!, 
		$isId: Boolean!, 
		$postCursor: String, 
		$postFirst: Int!
	) 
	{
    findProfileById(id: $id) @include(if: $isId) {
        ...getProfile 
    }
    findProfileBySlug(slug: $slug) @skip(if: $isId) {
        ...getProfile
    }
}

fragment getProfile on Profile {
	about
	...user
	posts(after: $postCursor, first: $postFirst) {
		nodes {
			author {
				...user
			}
			createdAt
			content
			id
			...likes
			comments(first: 5) {
				nodes {
					...comment
					replies(first: 5) {
						nodes {
							...comment
						}
					}
				}
				pageInfo {
					hasNextPage
					endCursor
				}
			}
		}
		pageInfo {
			startCursor
			endCursor
		}
		totalCount
	}
}

fragment user on Profile {
	name
	slug
	id
	url
	avatarImage {
		views {
			name
			url
		}
	}
}

fragment likes on Post {
	likes(first: 100) {
		nodes {
			avatarImage {
				views {
					name
					url
				}
			}
			name
		}
		totalCount
	}
}

fragment comment on Comment {
	id
	author {
		...user
	}
	createdAt
	content
	likes(first: 10) {
		totalCount
	}
}
